---
title: "AWS - Part 3"
date: 2026-03-01
categories: [AWS]
tags: [AWS]
---

## SQS

Simple Queue Service (SQS) is a fully managed message queuing service that enables you to decouple the components of your application. SQS stores messages in a highly available and durable manner, and provides APIs for sending and receiving messages.

- Unlimited throughput, unlimited number of messages in queue
- low latency, 1024KB per message max
- Default retention of messages - 4 - 14 days max
- Can have duplicate messages
- can have out of order messages

**Producing Messages**

- sent to SQS using SDK
- The message is persisted in SQS untill a consumer deletes it

**Consuming Messages**

- Consumers can be EC2 instances, Lambda functions, or any service that supports SQS
- Poll SQS for messages(receive upto 10 messages at a time)
- Process the messages
- Call delete API message

**Security**

- in-flight encryption using HTTPS API
- at rest encryption using KMS
- client side encryption

**A case where SQS might come into picture**

User asks backend to do bulk compression of 1000 music files. This might cause the backend to become overloaded. SQS can be used to offload this work by 
queuing the requests and processing them asynchronously.

**Visibility Timeout**

- After a message is polled by a consumer, it becomes invisible to other consumers for a configurable period of time (default 30 seconds)
- This allows the consumer to process the message without interference from other consumers
- If the message is not deleted within the visibility timeout, it becomes visible again and can be picked up by another consumer
- Consumer can extend the visibility timeout to give itself more time to process the message

**SQS - Long Polling**

- SQS supports long polling, where the consumer polls for messages and waits for a configurable period of time (default 20 seconds) before timing out
- This reduces the number of empty polls and improves efficiency
- Long polling is especially useful when the queue is expected to have few messages, as it reduces the number of API calls made by the consumer
- if configured time is 20s, and the consumer finds a message at t=7, it returns immediately.

Q. Is long polling always better than short polling?
A. Long polling is almost always better than short polling because it returns immediately when messages exist but reduces empty calls when they donâ€™t.

**SQS - FIFO Queue**
